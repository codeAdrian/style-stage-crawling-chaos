/* apply a natural box layout model to all elements, but allowing components to change */
html {
  box-sizing: border-box;
  scroll-behavior: smooth;
}

body {
  padding: var(--spacing__vertical--1) var(--spacing__horizontal--n1) 0;
  background-color: var(--color__background);
  overflow-x: hidden;
  overflow-y: auto;

  @media (min-width: 1024px) {
    padding: var(--spacing__vertical--1) var(--spacing__horizontal--2) 0;
  }
}

*,
*:before,
*:after {
  box-sizing: inherit;
}

body > aside,
main {
  max-width: 1366px;
  margin: 0 auto;

  &:focus {
    outline: 0;
  }

  & ol,
  & ul {
    list-style: none;
    margin: 0;
    padding: 0;
    margin-bottom: var(--spacing__vertical--1);

    & li {
      padding-bottom: var(--spacing__vertical--n4);
      padding-left: var(--spacing__horizontal--n2);

      &::before {
        content: "";
        display: inline-block;
        width: 0;
        height: 0;
        border: 6px double var(--color__primary);
        transform: rotate3d(0, 0, 1, 45deg);
        margin-right: var(--spacing__vertical--n1);
      }
    }
  }

  & ul {
    @media (min-width: 600px) {
      display: flex;
      flex-wrap: wrap;
    }

    & li {
      flex-basis: 50%;
    }
  }

  & ol {
    position: relative;
    left: -20px;

    & li {
      text-indent: calc((var(--spacing__horizontal--1)) * -1);
      padding-left: var(--spacing__horizontal--2);

      &:not(:last-child) {
        padding-bottom: var(--spacing__vertical--1);
        position: relative;

        &::after {
          content: "";
          position: absolute;
          left: calc(
            var(--spacing__horizontal--1) + var(--spacing__horizontal--n6)
          );
          height: calc(100% - var(--spacing__horizontal--1));
          top: var(--spacing__horizontal--1);
          bottom: 0;
          width: 0;
          border: 1px dashed var(--color__muted);
        }
      }
    }
  }

  & p {
    margin-top: 0;
    margin-bottom: var(--spacing__vertical--n1);
  }

  & article {
    @media (min-width: 1024px) {
      margin-bottom: var(--spacing__vertical--2);
    }
  }

  & section.container {
    grid-gap: 0;
    grid-template-rows: auto auto auto auto auto 1fr;
    border-bottom: 8px double var(--color__muted);
    padding-bottom: var(--spacing__vertical--1);
    margin-bottom: var(--spacing__vertical--1);

    @media (min-width: 1024px) {
      display: grid;
      padding-bottom: var(--spacing__vertical--2);
      margin-bottom: var(--spacing__vertical--2);
      grid-template-columns: minmax(min-content, 320px) minmax(
          min-content,
          max-content
        );
    }

    @media (min-width: 1336px) {
      grid-template-columns: minmax(min-content, 460px) minmax(
          min-content,
          max-content
        );
    }

    & > * {
      align-self: start;

      @media (min-width: 1024px) {
        grid-column: 2 / -2;
        margin-left: var(--spacing__horizontal--1);
      }

      @media (min-width: 1336px) {
        grid-column: 2 / -1;
        margin-left: var(--spacing__horizontal--2);
      }

      &:last-child {
        margin-bottom: 0;
      }
    }

    & > h3 {
      &:not(:first-child) {
        font-family: var(--typography__fontFamily--primary);
        font-size: var(--typography__larger);
        padding-top: var(--spacing__vertical--n1);
        padding-bottom: var(--spacing__vertical--n1);
      }
    }

    & > h2,
    & > h3 {
      &:first-child {
        margin: 0;
        line-height: calc(
          var(--spacing__vertical--2) + var(--spacing__vertical--n3)
        );
        padding-left: 0;
        grid-column: span 1;
        grid-row: span 3;
        grid-row-start: 1;
        grid-row-end: 10;
        padding-bottom: var(--spacing__vertical--1);

        @media (min-width: 1024px) {
          padding-bottom: 0;
          grid-row: span 2;
          position: sticky;
          top: var(--spacing__vertical--n1);
        }
      }
    }
  }
}

blockquote {
  padding: 0;
  margin: 0;

  @media (min-width: 1024px) {
    margin-top: var(--spacing__vertical--n1);
    margin-bottom: var(--spacing__vertical--1);
  }

  & p {
    padding: var(--spacing__vertical--n1) var(--spacing__horizontal--n1);
    border: 4px solid var(--color__muted);

    @media (min-width: 480px) {
      padding: var(--spacing__vertical--1) var(--spacing__horizontal--1);
    }

    @media (min-width: 1024px) {
      background-color: transparent;
      border: 12px double var(--color__muted);
      padding: var(--spacing__vertical--1) var(--spacing__horizontal--1);
    }
  }
}

#files {
  text-align: center;
  margin-bottom: var(--spacing__vertical--1);

  @media (min-width: 430px) {
    border: 12px double var(--color__muted);
    padding: var(--spacing__vertical--2) var(--spacing__horizontal--1);
  }

  @media (min-width: 1366px) {
    margin-bottom: 0;
  }

  & h3 {
    font-size: var(--typography__largest);
    color: var(--color__primary);
    text-shadow: 0 0.02em 0 var(--color__secondary), 0 0.1em 0 #0f0f0f;
    letter-spacing: var(--spacing__horizontal--n6);
    line-height: 1;
    padding-bottom: var(--spacing__vertical--2);
  }

  & a {
    box-sizing: content-box;
    background-clip: padding-box;
    border-radius: 12px;
    border: 8px double var(--color__cta);
    box-shadow: 0 0.1em 0 rgba(0, 0, 0, 0), 0 0.1em 0.2em 0 #0f0f0f;
    background-color: var(--color__cta);
    padding: var(--spacing__vertical--n2) var(--spacing__horizontal--n1);
    color: var(--color__secondary);
    text-decoration: none;
    text-transform: uppercase;
    letter-spacing: 1px;
    display: flex;
    max-width: 300px;
    margin-left: auto;
    margin-right: auto;
    justify-content: center;

    transition: background-color 0.3s ease, border-color 0.3s ease;
    cursor: pointer;

    &:hover,
    &:active {
      background-color: var(--color__cta--shadow);
      border-color: var(--color__cta--shadow);
    }

    @media (min-width: 430px) {
      padding: var(--spacing__vertical--n2) var(--spacing__horizontal--1);
    }

    &:not(:last-child) {
      margin-bottom: var(--spacing__vertical--1);
    }

    @media (min-width: 1366px) {
      display: inline-flex;

      &:not(:last-child) {
        margin-bottom: 0;
        margin-right: var(--spacing__horizontal--1);
      }
    }
  }
}

#contribute {
  & .container {
    &:nth-child(2) {
      border-bottom-width: 0;
      padding-bottom: 0;
    }
  }
}
